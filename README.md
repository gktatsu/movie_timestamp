# movie_timestamp
## youtube ライブから、タイムスタンプを取得して、再生できるWebアプリ

YouTube Live タイムスタンプアプリ 要件定義書
概要
本プロジェクトは、ユーザーがYouTubeライブ動画を視聴しながら、特定のタイミングでタイムスタンプを記録し、そのタイムスタンプにコメントを追加できるWebアプリケーションの作成を目指します。また、記録されたタイムスタンプをエクセルファイルとして出力・インポートする機能も提供します。エクセルファイルをインポートすることで、タイムスタンプとコメントを再度アプリ内に復元することができます。さらに、動画の途中でURLが変更された場合でも、正しい動画のタイトルとURLをエクセルファイルに出力する機能を持ちます。

機能一覧
YouTubeリンクの入力機能

ユーザーがYouTubeライブのURLを入力できる。
正規表現を使って、URLからYouTubeの動画IDを抽出する。
動画IDが無効な場合、エラーメッセージを表示する。
動画が正しく読み込まれた場合、YouTube IFrame Player APIを利用して、動画を埋め込む。
YouTube IFrame Player APIを使用した動画再生機能

ユーザーが指定したYouTubeライブ動画を、動画IDに基づいて表示する。
動画は横幅100%を維持し、16:9のアスペクト比で表示される。
タイムスタンプが記録されると、その時点での動画タイトルとURLを記録する。
タイムスタンプの記録機能

プレイヤーが再生中、ユーザーが「タイムスタンプを記録」ボタンを押すと、現在の再生時間（秒）を取得し、分:秒の形式（例: 2:15）で表示される。
取得されるタイムスタンプは、ユーザーが設定した0秒前、30秒前、1分前のいずれかのタイムスタンプを保存できる。
タイムスタンプを押した瞬間の動画タイトルとURLも記録される。
動画が30秒未満の場合、タイムスタンプは0:00として記録される。
各タイムスタンプにはコメントフィールドが用意され、コメントを自由に追加できる。
タイムスタンプを押すたびに、新しいタイムスタンプが画面に表示され、順序を「新しい順」または「古い順」で並べ替え可能。
タイムスタンプごとの再生機能

各タイムスタンプの左側に「再生」ボタンが表示される。
ユーザーが「再生」ボタンをクリックすると、該当のタイムスタンプの時刻から動画が再生される。
エクセルファイルの出力機能

記録されたタイムスタンプとコメントをエクセルファイルとして出力できる。
エクセルのA1セルには「タイトル」という文字列を、B1セルにはタイムスタンプを記録した動画のタイトルを挿入する。
A2セルには「URL」という文字列を、B2セルには動画のURLを挿入する。
A3セルには「タイムスタンプ」、B3セルには「コメント」という見出しを挿入し、以降の行に各タイムスタンプと対応するコメントを挿入する。
複数の動画でタイムスタンプを記録している場合、最後にタイムスタンプを記録した動画のタイトルとURLがエクセル出力時に反映される。
エクセルファイルのインポート機能

ユーザーがエクセルファイルをインポートすることで、以前記録したタイムスタンプとコメントを復元できる。
インポートされたエクセルファイルから、A1に動画のタイトル、A2に動画のURLが含まれていることを確認し、それらをプレイヤーに反映する。
エクセルのA4行以降からタイムスタンプとコメントを読み取り、画面に表示する。
復元されたタイムスタンプも「再生」ボタンで再生が可能。
タイムスタンプの削除機能

各タイムスタンプには削除ボタンがあり、ユーザーが特定のタイムスタンプを削除できる。
エラーメッセージとロードインジケータ

無効なYouTube URLを入力した場合、ユーザーに警告メッセージを表示する。
動画の読み込み中は、「動画を読み込んでいます...」というインジケータを表示する。
レスポンシブデザイン

画面幅が狭いデバイスでも、レイアウトが崩れないように設計されている。
YouTubeプレイヤーは常に中央に表示され、横幅に合わせて高さも自動調整される（16:9のアスペクト比を維持）。
タイムスタンプや他の入力フィールドは、画面幅に応じて縦方向に並べ替えられる。
画面レイアウト
YouTubeリンク入力欄と動画読み込みボタン

YouTubeリンク入力欄： <input type="text" id="youtubeLinkInput" placeholder="YouTube Live URLを入力">
動画読み込みボタン： <button id="loadVideoButton">動画を読み込む</button>
YouTubeプレイヤー

YouTube IFrame Player APIで埋め込まれた動画プレイヤー： <div id="player"></div>
16:9のアスペクト比を維持し、画面幅に応じて高さが自動調整される。
タイムスタンプの記録ボタン

タイムスタンプ記録ボタン： <button id="getTimestamp" disabled>タイムスタンプを記録</button>
タイムスタンプリスト

タイムスタンプの一覧： <ul id="timestampEntries"></ul>
各タイムスタンプには再生ボタン、コメント入力欄、削除ボタンが表示される。
エクセルファイルのインポートと出力

エクセルファイルのインポートボタン： <input type="file" id="importFile" accept=".xlsx">
インポートボタン： <button id="importExcelButton">インポート</button>
エクセル出力ボタン： <button id="endViewingButton" disabled>視聴終了 & エクセル出力</button>
技術スタック
HTML5
レスポンシブデザインに対応したマークアップを使用。各種入力フィールド、ボタン、YouTubeプレイヤーの表示を行う。

CSS3
レスポンシブデザインに対応し、メディアクエリを使用して画面幅に応じてデザインを調整。

JavaScript
以下のライブラリ・APIを使用して、機能を実装。

YouTube IFrame Player API：YouTube動画の埋め込みと制御に使用。
XLSX.js：エクセルファイルの生成・インポートに使用。
ライブラリの使用例

YouTube IFrame Player APIを使用して、動画IDに基づいてYouTubeプレイヤーを表示する。
XLSX.writeFile()を使って、タイムスタンプとコメントをエクセルファイルに書き出す。
XLSX.read()を使って、エクセルファイルからタイムスタンプとコメントを読み取る。
動作フロー
YouTubeリンクの入力

ユーザーがURLを入力し、「動画を読み込む」ボタンをクリック。
正規表現を使用してURLから動画IDを抽出し、YouTube IFrame Player APIを通じて動画をプレイヤーに表示。
タイムスタンプの記録

ユーザーが「タイムスタンプを記録」ボタンを押すと、現在の再生時間が記録される。
タイムスタンプとコメント欄がリストに追加され、ユーザーが自由にコメントを入力できる。
エクセルファイルの出力

ユーザーが「視聴終了 & エクセル出力」ボタンを押すと、タイムスタンプとコメントがエクセルファイルとして出力される。
エクセルファイルのインポート

ユーザーが以前出力したエクセルファイルをインポートすると、タイムスタンプとコメントが復元され、再度操作可能となる。
エラーハンドリング
YouTubeのURLが無効な場合、<div id="errorMessage"></div>にエラーメッセージを表示。
動画の読み込み中は、<div id="loadingIndicator">動画を読み込んでいます...</div>が表示される。